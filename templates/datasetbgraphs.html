<!DOCTYPE html>
<html>
<head>
	<title>Covid-19 Dashboard</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
	<style type="text/css">
		
	</style>
</head>
<body>
	<center>
	<h1>CS 127: COVID-19 Dashboard</h1>

	<h3>Dataset B</h3>
	</center>
	<div>
		<h1 align="center">Age Group of Patients</h1>
		<canvas id="age-chart" width="16" height="6"></canvas><br><br>
		<h1 align="center">Sex of Patients</h1>
		<canvas id="sex-chart" width="3" height="1"></canvas><br><br>
		<h1 align="center">Patients Per City/Municipality</h1>
		<canvas id="muni-chart" width="3" height="15"></canvas><br><br>
		<h1 align="center">Patients Per Region/Province</h1>
		<canvas id="region-chart" width="3" height="10"></canvas><br><br>
	</div>

{% block javascript %}
<script>
	ageLabel = JSON.parse({{ ageLabel | tojson }})
	ageData = JSON.parse({{ ageData | tojson }})
	let ageChartInfo = document.getElementById('age-chart').getContext('2d');
	let ageChart = new Chart (ageChartInfo, {
		type: 'bar',
		data: {
			labels: ageLabel,
			datasets: [{
				label: 'Number of Patients',
				data: ageData,
				backgroundColor: 'rgba(255, 87, 34, 1)'
			}]
		},
		options: {}
	});

	sexLabel = JSON.parse({{ sexLabel | tojson }})
	sexData = JSON.parse({{ sexData | tojson }})
	let sexChartInfo = document.getElementById('sex-chart').getContext('2d');
	let sexChart = new Chart (sexChartInfo, {
		type: 'pie',
		data: {
			labels: sexLabel,
			datasets: [{
				label: 'Sex of Patients',
				data: sexData,
				backgroundColor: [
				'rgba(211,47,47,1)',
				'rgba(25,118,210,1)',
				'rgba(0,0,0,1)'
				]
			}] 
		},

		options: {}
	});

	muniLabel = JSON.parse({{ muniCityResLabel | tojson }})
	muniData = JSON.parse({{ muniCityResData | tojson }})
	let muniChartInfo = document.getElementById('muni-chart').getContext('2d');
	let muniChart = new Chart (muniChartInfo, {
		type: 'horizontalBar',
		data: {
			labels: muniLabel,
			datasets: [{
				label: 'Number of Patients',
				data: muniData,
				backgroundColor: 'rgba(0, 121, 107, 1)'
			}]
		},
		options: {}
	});

	regLabel = JSON.parse({{ regProvResLabel | tojson }})
	regData = JSON.parse({{ regProvResData | tojson }})
	let regChartInfo = document.getElementById('region-chart').getContext('2d');
	let regChart = new Chart (regChartInfo, {
		type: 'horizontalBar',
		data: {
			labels: regLabel,
			datasets: [{
				label: 'Number of Patients',
				data: regData,
				backgroundColor: 'rgba(249, 168, 37, 1)'
			}]
		},
		options: {}
	});

</script>
{% endblock %}
</body>
</html>
